<!DOCTYPE html>
<html>

<head>
    <title>Form Submission Result</title>
</head>
<script src="//cdn.rawgit.com/jmnote/plantuml-encoder/d133f316/dist/plantuml-encoder.min.js"></script>
<script type="text/javascript">
    // <![CDATA[
    function preloader() {
        document.getElementsByClassName("loader")[0].style.display = "none";
    } //preloader
    window.onload = preloader;
    // ]]>

    setTimeout(function() {
        l = document.getElementsByTagName("code").length
        var encoded = plantumlEncoder.encode(document.getElementsByTagName("code")[l - 1].textContent)
        document.getElementById("im").src = "http://www.plantuml.com/plantuml/png/" + encoded
    }, 3000);

    function showloader() {
        document.getElementsByClassName("loader")[0].style.display = "block";
    }
</script>

<body onload="preloader()">
    <style>
        .loader {
            border: 16px solid #f3f3f3;
            /* Light grey */
            border-top: 16px solid #3498db;
            /* Blue */
            border-radius: 50%;
            width: 120px;
            height: 120px;
            animation: spin 2s linear infinite;
        }
        
        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }
            100% {
                transform: rotate(360deg);
            }
        }
    </style>
    <div class="loader"></div>
    <form method="POST" action="/">
        <input type="text" name="input_data" style="width: 1000px;">
        <button type="submit" onclick="showloader()">Submit</button>
    </form>
    <h1>ChatGPT Result:</h1>
    {{ retchunks | safe }}
    <img id="im" src=" " />
</body>

</html>